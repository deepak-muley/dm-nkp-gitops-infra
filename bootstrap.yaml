# Bootstrap manifest for NKP GitOps - Multi-Region Multi-AZ
#
# This is a reference bootstrap file. For production use, apply the
# region+az specific bootstrap file for your management cluster.
#
# ┌─────────────────────────────────────────────────────────────────────────────┐
# │  REGION-SPECIFIC BOOTSTRAP FILES                                            │
# ├─────────────────────────────────────────────────────────────────────────────┤
# │  USA Region:                                                                │
# │    region-usa/az1/bootstrap.yaml  ← Active (dm-nkp-mgmt-1)                  │
# │    region-usa/az2/bootstrap.yaml  ← Planned                                 │
# │    region-usa/az3/bootstrap.yaml  ← Planned                                 │
# │                                                                             │
# │  India Region:                                                              │
# │    region-india/az1/bootstrap.yaml  ← Planned                               │
# │    region-india/az2/bootstrap.yaml  ← Planned                               │
# │    region-india/az3/bootstrap.yaml  ← Planned                               │
# └─────────────────────────────────────────────────────────────────────────────┘
#
# Usage Examples:
#
#   # Bootstrap USA AZ1 (currently active):
#   kubectl apply -f https://raw.githubusercontent.com/deepak-muley/dm-gitops-dev/main/region-usa/az1/bootstrap.yaml
#
#   # Bootstrap India AZ1 (when ready):
#   kubectl apply -f https://raw.githubusercontent.com/deepak-muley/dm-gitops-dev/main/region-india/az1/bootstrap.yaml
#
# Each bootstrap file creates:
#   1. GitRepository - Points to this repo
#   2. Kustomization - Points to the region/az specific path
#
# ─────────────────────────────────────────────────────────────────────────────
# LEGACY: The manifests below bootstrap ALL regions/AZs from a single cluster.
# This is NOT recommended for production. Use region+az specific bootstrap files.
# ─────────────────────────────────────────────────────────────────────────────
---
apiVersion: source.toolkit.fluxcd.io/v1
kind: GitRepository
metadata:
  name: gitops-demo
  namespace: kommander
spec:
  interval: 1h
  ref:
    branch: main
  timeout: 60s
  url: https://github.com/deepak-muley/dm-gitops-dev.git
---
apiVersion: kustomize.toolkit.fluxcd.io/v1
kind: Kustomization
metadata:
  name: clusterops-demo
  namespace: kommander
spec:
  interval: 1h
  path: ./
  prune: true
  sourceRef:
    kind: GitRepository
    name: gitops-demo
    namespace: kommander
  timeout: 3m
