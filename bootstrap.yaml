# Bootstrap manifest for NKP GitOps - Multi-Region Multi-AZ
#
# ┌─────────────────────────────────────────────────────────────────────────────┐
# │  MANAGEMENT CLUSTER BOOTSTRAP                                              │
# ├─────────────────────────────────────────────────────────────────────────────┤
# │  USA Region:                                                                │
# │    region-usa/az1/management-cluster/bootstrap.yaml  ← Active              │
# │    region-usa/az2/management-cluster/bootstrap.yaml  ← Planned             │
# │    region-usa/az3/management-cluster/bootstrap.yaml  ← Planned             │
# │                                                                             │
# │  India Region:                                                              │
# │    region-india/az1/management-cluster/bootstrap.yaml  ← Planned           │
# │    region-india/az2/management-cluster/bootstrap.yaml  ← Planned           │
# │    region-india/az3/management-cluster/bootstrap.yaml  ← Planned           │
# └─────────────────────────────────────────────────────────────────────────────┘
#
# ┌─────────────────────────────────────────────────────────────────────────────┐
# │  WORKLOAD CLUSTER BOOTSTRAP                                                 │
# ├─────────────────────────────────────────────────────────────────────────────┤
# │  USA Region AZ1:                                                            │
# │    region-usa/az1/workload-clusters/dm-nkp-workload-1/bootstrap.yaml        │
# │    region-usa/az1/workload-clusters/dm-nkp-workload-2/bootstrap.yaml        │
# └─────────────────────────────────────────────────────────────────────────────┘
#
# Usage Examples:
#
#   # Bootstrap Management Cluster (USA AZ1):
#   kubectl apply -f https://raw.githubusercontent.com/deepak-muley/dm-nkp-gitops-infra/main/region-usa/az1/management-cluster/bootstrap.yaml
#
#   # Bootstrap Workload Cluster (dm-nkp-workload-1):
#   # Note: NKP workload clusters have Flux in kommander-flux watching all namespaces
#   export KUBECONFIG=~/.kube/dm-nkp-workload-1.kubeconfig
#   kubectl apply -f https://raw.githubusercontent.com/deepak-muley/dm-nkp-gitops-infra/main/region-usa/az1/workload-clusters/dm-nkp-workload-1/bootstrap.yaml
#
#   # Bootstrap Workload Cluster (dm-nkp-workload-2):
#   export KUBECONFIG=~/.kube/dm-nkp-workload-2.kubeconfig
#   kubectl apply -f https://raw.githubusercontent.com/deepak-muley/dm-nkp-gitops-infra/main/region-usa/az1/workload-clusters/dm-nkp-workload-2/bootstrap.yaml
#
# ─────────────────────────────────────────────────────────────────────────────
# LEGACY: The manifests below bootstrap from root path.
# This is NOT recommended for production. Use specific bootstrap files above.
# ─────────────────────────────────────────────────────────────────────────────
---
apiVersion: source.toolkit.fluxcd.io/v1
kind: GitRepository
metadata:
  name: gitops-demo
  namespace: kommander
spec:
  interval: 1h
  ref:
    branch: main
  timeout: 60s
  url: https://github.com/deepak-muley/dm-nkp-gitops-infra.git
---
apiVersion: kustomize.toolkit.fluxcd.io/v1
kind: Kustomization
metadata:
  name: clusterops-demo
  namespace: kommander
spec:
  interval: 1h
  path: ./
  prune: true
  sourceRef:
    kind: GitRepository
    name: gitops-demo
    namespace: kommander
  timeout: 3m
